# 内存 IO 流

## 内存 IO 流

### 介绍内存结构上的 I/O 流
Java I/O API 还提供了一些类来访问内存结构的内容，即字符数组或字节数组，以及字符字符串。在一些用例中，这个特性非常方便。
某些文件格式（JPEG 文件格式就是这种情况）要求在文件开头有一个特殊字段，该字段给出文件某些部分或字段的长度。在某些情况下，不可能提前计算这些部分。考虑压缩数据：计算 100 个整数的集合的大小很容易，但一旦对其进行了压缩，计算就会困难得多。使用正确的类，您可以在字节数组中创建这个压缩流，并简单地获取写入的字节数。本节末尾将介绍这个示例。

### 读取和写入字符数组
`CharArrayReader`和`CharArrayWriter`都包装了一个在这些类的构造函数中指定的`char`数组。它们分别是`Reader`和`Writer`的扩展，并且没有向这些类添加任何方法。

### 读取和写入字符串
`StringReader`类也是抽象类`Reader`的扩展。它基于作为参数传递给其构造函数的`String`构建。它没有向`Reader`类添加任何方法。
`StringWriter`有点不同。它包装了一个内部的`StringBuffer`，并可以向其追加字符。然后，您可以通过调用以下两个方法之一来获取这个`StringBuffer`。
- `getBuffer()`：返回内部的`StringBuffer`。这里没有进行防御性复制。
- `toString()`：通过调用内部`StringBuffer`的`toString()`方法构建一个字符字符串并返回。

### 读取和写入字节数组
有两个类可用于在数组中读取和写入字节：`ByteArrayInputStream`和`ByteArrayOutputStream`。
第一个类允许您将字节数组的内容作为`InputStream`读取，该字节数组作为参数提供给该类的构造函数。
第二个类允许您将字节写入字节数组。您可以固定此数组的初始大小，如果它已满，它将自动增长。一旦写入了字节，您可以通过不同的方式获取此数组的内容。
- `size()`：给出此数组中包含的字节数。
- `toString()`：将数组的内容作为字符字符串返回。此方法可以接受一个`CharSet`作为参数，以正确解码这些字节。
- `toBytes()`：返回此`ByteArrayOutputStream`内部数组的副本。