# 使用集合框架存储数据（Storing Data Using the Collections Framework）

## 介绍集合框架
集合框架是 JDK 中使用最广泛的 API。无论您正在开发什么应用程序，都有可能需要在某个时候在内存中存储和处理数据。
数据结构的历史几乎可以追溯到计算本身。集合框架是关于如何在内存中存储、组织和访问数据的概念的实现，这些概念在 Java 发明之前就已经发展了很长时间。正如您将看到的，集合框架以非常有效的方式实现了这一点。
集合框架于 1998 年在 Java SE 2 中首次引入，此后被重写了两次：
 - 在 Java SE 5 中添加泛型时；
 - 在 Java 8 中引入 lambda 表达式以及接口中的默认方法时。
这是迄今为止对集合框架进行的最重要的两次更新。但实际上，几乎每个版本的 JDK 都对集合框架进行了一系列更改。
在本部分中，您将学习集合框架提供的最有用的数据结构，以及在应用程序中操作这些数据时将使用的模式。
首先，您需要知道的是，从技术角度来看，集合框架是一组接口，用于模拟在不同类型的容器中存储数据的不同方式。然后，框架为每个接口提供至少一个实现。了解这些实现与了解接口同样重要，选择正确的实现取决于您需要用它来做什么。

## 在集合框架中找到方向
一开始，集合框架中的接口和类的数量可能会让人不知所措。实际上，有许多可用的结构，包括类和接口。有些名称具有自解释性，如`LinkedList`，有些具有特定的行为，如`ConcurrentHashMap`，有些可能听起来很奇怪，如`ConcurrentSkipListMap`。
您会更频繁地使用其中的一些元素。如果您已经熟悉 Java 语言，您可能已经遇到过`List`、`ArrayList`和`Map`。本教程重点介绍集合框架中最广泛使用的结构，这些是您作为 Java 开发人员日常使用的，并且您需要最了解和理解的。
话虽如此，您需要对集合框架中为您提供的内容有一个大致的了解。
首先，框架由接口和实现组成。选择正确的接口意味着您需要知道您希望为应用程序带来哪些功能。您的需求包括：
 - 存储对象并对其进行迭代？
 - 将对象推入队列并弹出它们？
 - 使用键检索它们？
 - 通过索引访问它们？
 - 对它们进行排序？
 - 防止存在重复或空值？
选择正确的实现意味着您需要知道您将如何使用这些功能：
 - 将通过迭代还是随机、索引访问来访问您的对象？
 - 对象在应用程序启动时是否固定，并且在其生命周期内不会发生太大变化？
 - 对象的数量是否重要，是否需要大量检查某些对象的存在？
 - 存储对象所需的结构是否将被并发访问？
集合框架可以为您提供所有这些问题的正确解决方案。
集合框架中有两个主要的接口类别：集合和映射。
集合用于存储对象并对其进行迭代。`Collection`接口是这个类别的根接口。实际上，`Collection`接口扩展了`Iterable`接口，但这个接口不属于集合框架。
映射将一个对象与一个键一起存储，该键代表该对象，就像主键在数据库中代表一个对象一样，如果您熟悉这个概念。有时您会听到映射存储键/值对，这正是映射所做的。`Map`接口是这个类别的根接口。
`Collection`层次结构的接口和`Map`层次结构的接口之间没有直接关系。
除了这些集合和映射，您还需要知道，在`Collection`层次结构中，您可以找到用于模型队列和栈的接口。队列和栈并不是真正关于迭代对象集合的，但由于它们已被添加到`Collection`层次结构中，因此您可以使用它们来进行迭代。
还有一个最后需要知道的层次结构，即`Iterator`层次结构。迭代器是一个可以迭代对象集合的对象，它是集合框架的一部分。
这就形成了两个主要类别，`Collection`和`Map`，一个子类别`Queue`，和一个侧边类别`Iterator`。

## 避免使用旧的接口和实现
集合框架仅在 Java 2 中引入，这意味着在它之前还有其他的类和接口。为了保持向后兼容性，这些类和接口仍然在 JDK 中，但您不应在应用程序中再使用它们。
这些类和接口包括：
 - `Vector`和`Stack`。`Vector`类已被改造为实现`List`接口。如果您在非并发环境中使用向量，则可以安全地用`ArrayList`替换它。`Stack`类扩展了`Vector`，在非并发环境中应替换为`ArrayDeque`。
 - `Vector`类使用`Enumeration`接口来模型其迭代器。这个接口不应再使用：现在首选的接口是`Iterator`接口。
 - `HashTable`：这个类已被改造为实现`Map`接口。如果您在非并发环境中使用这个类的实例，则可以安全地用`HashMap`替换它。在并发环境中，可以使用`ConcurrentHashMap`作为替换。

## 为什么选择集合而不是数组？
您可能想知道，当您觉得将数据放在一个好的旧数组中就可以完成工作时，为什么还要费心学习集合框架。
事实上，在任何情况下，如果您有一个简单的解决方案，您能够很好地掌握，并且满足您的需求，那么您绝对应该坚持使用它！
集合能为您做什么，而数组不能？
 - 集合跟踪它包含的元素数量。
 - 集合的容量不受限制：您可以在集合中添加（几乎）任意数量的元素。
 - 集合可以控制您可以在其中存储哪些元素。例如，您可以防止添加空元素。
 - 集合可以查询是否存在给定元素。
 - 集合提供了与另一个集合相交或合并等操作。
这只是集合能为您做的一小部分。实际上，由于集合是一个对象，并且鉴于对象是可扩展的，您可以在 JDK 提供的大多数集合上添加任何您需要的操作。这在数组中是不可能的，因为数组在 Java 中不是一个对象。