# 捕获组

## 捕获组

在前一节中，您看到了量词是如何一次附加到一个字符、字符类或捕获组上的。但直到现在，我们还没有详细讨论捕获组的概念。

捕获组是一种将多个字符视为单个单元的方式。它们是通过将要分组的字符放在一对括号内来创建的。例如，正则表达式`(dog)`创建了一个包含字母"d"、"o"和"g"的单一组。匹配捕获组的输入字符串的部分将被保存在内存中，以便以后通过后向引用（在下面“后向引用”部分中讨论）进行调用。

## 编号

正如在Pattern API中描述的那样，捕获组是通过从左到右计算它们的开括号来编号的。例如，在表达式`((A)(B(C)))`中，有四个这样的组：

1. `((A)(B(C)))`
2. `(A)`
3. `(B(C))`
4. `(C)`

要找出表达式中有多少组，可以在`matcher`对象上调用`groupCount()`方法。`groupCount()`方法返回一个`int`，显示匹配器模式中存在的捕获组的数量。在这个例子中，`groupCount()`将返回数字4，表明模式包含4个捕获组。

还有一个特殊的组，组0，它始终表示整个表达式。这个组不包括在`groupCount()`报告的总数中。以`(?`开头的组是纯的，非捕获组，它们不捕获文本，也不计入组的总数。稍后在“Pattern类的方法”部分中，您将看到非捕获组的例子。

理解组的编号很重要，因为一些`Matcher`方法接受一个`int`作为参数，指定一个特定的组号：

- `public int start(int group)`: 返回在上一次匹配操作中由给定组捕获的子序列的起始索引。
- `public int end(int group)`: 返回在上一次匹配操作中由给定组捕获的子序列的最后一个字符的索引加一。
- `public String group(int group)`: 返回在上一次匹配操作中由给定组捕获的输入子序列。

## 后向引用

匹配捕获组的输入字符串部分将被保存在内存中，以便以后通过后向引用进行调用。后向引用在正则表达式中指定为一个反斜杠（`\`）后跟一个数字，表示要调用的组的编号。例如，表达式`(\\d\\d)`定义了一个捕获两个连续数字的捕获组，稍后可以在表达式中通过后向引用`\\1`进行调用。

要匹配任何两个数字，后面跟着完全相同的两个数字，您将使用正则表达式`(\\d\\d)\\1`：

```markdown
输入您的正则表达式: (\\d\\d)\\1
输入要搜索的字符串: 1212
我发现文本"1212"从索引0开始，到索引4结束。
```

如果您改变最后两个数字，匹配将失败：

```markdown
输入您的正则表达式: (\\d\\d)\\1
输入要搜索的字符串: 1234
未找到匹配项。
```

对于嵌套捕获组，后向引用的工作原理完全相同：指定一个反斜杠后跟要调用的组的编号。


