# 接口

## Java中的接口

在软件工程中，有多种情况要求不同的程序员团队同意一个“合同”，明确他们的软件如何交互。每个团队都应该能够在不了解对方代码如何编写的情况下编写自己的代码。一般来说，接口就是这样的合同。

例如，想象一个未来社会，由计算机控制的机器人汽车在没有人类操作员的情况下运送乘客穿过城市街道。汽车制造商编写软件（当然是Java），操作汽车——停止、启动、加速、左转等。另一个工业集团，电子导航仪器制造商，制造计算机系统，接收GPS（全球定位系统）位置数据和无线传输的交通状况，并利用这些信息驾驶汽车。

汽车制造商必须发布一个行业标准接口，详细说明可以调用哪些方法来使汽车移动（任何汽车，任何制造商）。然后，导航制造商可以编写软件，调用接口中描述的方法来指挥汽车。两个工业集团都不需要知道对方软件的实现方式。实际上，每个集团都认为自己的软件高度专有，并保留随时修改它的权利，只要它继续遵守已发布的接口。

在Java编程语言中，接口是一种引用类型，类似于类，但只能包含常量、方法签名、默认方法、静态方法（私有或公共，不能是受保护的）、实例非抽象方法（私有，不能是公共的，也不能是受保护的）和嵌套类型。只有默认方法、私有方法和静态方法有方法体。接口不能被实例化——它们只能被类实现或被其他接口扩展。本节后面将讨论扩展。

定义接口类似于创建一个新类：
```java
public interface OperateCar {

   // 如果有的话，常量声明

   // 方法签名

   // 具有值 RIGHT, LEFT 的枚举
   int turn(Direction direction,
            double radius,
            double startSpeed,
            double endSpeed);
   int changeLanes(Direction direction,
                   double startSpeed,
                   double endSpeed);
   int signalTurn(Direction direction,
                  boolean signalOn);
   int getRadarFront(double distanceToCar,
                     double speedOfCar);
   int getRadarRear(double distanceToCar,
                    double speedOfCar);
         ......
   // 更多方法签名
}
```
注意方法签名没有大括号，并以分号结束。

要使用接口，您编写一个实现接口的类。当一个可实例化的类实现接口时，它为接口中声明的每个方法提供了一个方法体。例如：
```java
public class OperateBMW760i implements OperateCar {

    // OperateCar方法签名，实现——
    // 例如：
    public int signalTurn(Direction direction, boolean signalOn) {
       // 打开宝马左转弯指示灯的代码
       // 关闭宝马左转弯指示灯的代码
       // 打开宝马右转弯指示灯的代码
       // 关闭宝马右转弯指示灯的代码
    }

    // 根据需要的其他成员——例如，对接口客户端不可见的辅助类
}
```
在上述机器人汽车示例中，将由汽车制造商实现接口。雪佛兰的实现当然会与丰田的大不相同，但两家制造商都将遵守相同的接口。作为接口的客户端的导航制造商，将构建使用GPS数据、数字街道地图和交通数据来驾驶汽车的系统。在此过程中，导航系统将调用接口方法：转弯、变道、刹车、加速等。

## 接口作为APIs
机器人汽车示例显示了接口被用作行业标准应用程序编程接口（API）。APIs也常见于商业软件产品中。

通常，一家公司销售一个包含复杂方法的软件包，另一家公司希望在其自己的软件产品中使用这些方法。
一个例子是将数字图像处理方法的软件包出售给制作最终用户图形程序的公司：

- 图像处理公司编写其类以实现一个接口，并将其公开给其客户。
- 然后图形公司使用接口中定义的签名和返回类型调用图像处理方法。

虽然图像处理公司的API是公开的（对其客户），但它对API的实现却是一个严格保密的秘密——实际上，只要它继续实现客户依赖的原始接口，它可能在以后的日期修改实现。

接口是多功能的引用类型，允许你定义`default`方法，并在不破坏实现类的情况下添加功能给给定类型。
此外，有时你可以在`private`方法中提取公共的代码片段，从而减少`default`方法中的代码重复。
查看本系列的下一个教程，以了解更多关于接口内方法定义的信息。

## 定义接口
接口声明由修饰符、关键字`interface`、接口名称、父接口的逗号分隔列表（如果有）和接口体组成。例如：
```java
public interface GroupedInterface extends Interface1, Interface2, Interface3 {

    // 常量声明

    // 自然对数的底数
    double E = 2.718282;

    // 方法签名
    void doSomething (int i, double x);
    int doSomethingElse(String s);
}
```
`public`访问说明符表示接口可以被任何包中的任何类使用。如果你不指定接口为public，那么你的接口只能被与接口在同一包中定义的类访问。

接口可以扩展其他接口，就像类可以扩展另一个类一样。然而，与类只能扩展一个其他类不同，接口可以扩展任意数量的接口。接口声明包括它扩展的所有接口的逗号分隔列表。

接口体可以包含抽象方法、默认方法和静态方法。

接口中的抽象方法跟在分号后面，但没有大括号（抽象方法不包含实现）。

默认方法是用`default`修饰符定义的，静态方法用`static`关键字定义。接口中的所有抽象、默认和静态方法隐式地是公共的，所以你可以省略`public`修饰符。

此外，接口可以包含常量声明。接口中定义的所有常量值隐式地是`public`、`static`和`final`。同样，你可以省略这些修饰符。
